{% load wagtailimages_tags wagtailcore_tags %}
{% image self.image height-400 as img %}

<section class="w-full my-12">
  <div class="flex flex-row items-stretch gap-6 max-w-6xl mx-auto px-4">

    {% if self.layout == "image_right" %}
      <!-- TEXT LEFT -->
      <div class="w-1/2 flex items-center justify-end pr-12 text-left">
        <div class="prose prose-lg dark:prose-invert max-w-none">
          {{ self.text|richtext }}
        </div>
      </div>

      <!-- IMAGE RIGHT -->
      <div class="w-1/2 flex items-center justify-start">
        <img
          src="{{ img.url }}"
          alt="{{ img.alt }}"
          class="w-full h-auto object-contain rounded-xl shadow-md"
          loading="lazy"
        >
      </div>

    {% else %}
      <!-- IMAGE LEFT -->
      <div class="w-1/2 flex items-center justify-end">
        <img
          src="{{ img.url }}"
          alt="{{ img.alt }}"
          class="w-full h-auto object-contain rounded-xl shadow-md"
          loading="lazy"
        >
      </div>

      <!-- TEXT RIGHT -->
      <div class="w-1/2 flex items-center justify-start pl-12 text-right">
        <div class="prose prose-lg dark:prose-invert max-w-none">
          {{ self.text|richtext }}
        </div>
      </div>
    {% endif %}

  </div>
</section>
